{% if section.settings.product != blank %}
  {% assign product = all_products[section.settings.product] %}

  <div class="custom-product-section">
    {% if product.featured_image %}
      <div class="custom-product-image">
        <img
          src="{{ product.featured_image | image_url: width: 600 }}"
          alt="{{ product.title }}"
          loading="lazy"
        >
      </div>
    {% endif %}

    <div class="custom-product-info">
      <h2>{{ product.title }}</h2>

      <p class="price">
        {{ product.price | money }}
      </p>

      {% form 'product', product %}
        {% if product.has_only_default_variant %}
          <input
            type="hidden"
            name="id"
            value="{{ product.selected_or_first_available_variant.id }}"
          >
        {% else %}
          <select name="id">
            {% for variant in product.variants %}
              <option
                value="{{ variant.id }}"
                {% if variant == product.selected_or_first_available_variant %}
                  selected
                {% endif %}
              >
                {{ variant.title }} - {{ variant.price | money }}
              </option>
            {% endfor %}
          </select>
        {% endif %}

        {% if product.available %}
          <button type="submit" class="btn">Agregar al carrito</button>
        {% else %}
          <button type="button" class="btn" disabled>Sin stock</button>
        {% endif %}
      {% endform %}
    </div>
  </div>

{% else %}
  <div class="custom-product-fallback">
    <p>No hay producto seleccionado.</p>
  </div>
{% endif %}

{% schema %}
{
  "name": "Producto destacado custom",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Seleccionar producto"
    }
  ],
  "presets": [
    {
      "name": "Producto destacado custom"
    }
  ]
}
{% endschema %}
